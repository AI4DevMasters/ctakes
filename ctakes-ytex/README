Contents

############
Introduction
############

Need buildhelper m2e plugin

== Developing ==
We have currently tested mysql and ms sql server, oracle is pending.  HSQL is used only for unit testing.  

YTEX is driven by a property file, ytex.properties.  The property file used when running ytex java programs 
(aside from junit tests) is src\main\resources\org\apache\ctakes\ytex\ytex.properties.  Refer to the example
properties files under /ctakes-ytex-res/src/main/resources/org/apache/ctakes/ytex

YTEX relies on some config files generated from templates via an ant build script.  These config files are 
generated automatically by the maven build (which runs the ant build script).  
The maven eclipse integration is a bit buggy; you should run the maven build from the command line so that 
things work correctly.

For development, you must set up a database.  There are 2 types of database setups, depending on if you have a UMLS
installation (and you've configured ytex to use it):
* With UMLS - YTEX will generate a dictionary lookup table from your UMLS database.  This requires tokenizing every 
string in MRCONSO which will take a while.  If you have UMLS installed and want to use it, configure the 
umls.schema/umls.catalog properties in ytex.properties.
* Without UMLS - YTEX will load a pre-fabricated dictionary lookup table generated from the UMLS 2013AA.  This is included
in the ctakes-resources zip from sourceforge.  You have to copy v_snomed_fword_lookup.txt to ctakes-ytex\scripts\data\umls\.

After running the maven build, run the ant script to set up your database.  Make sure java and ant are in your path, 
and run the following commands
* Windows
cd ctakes-ytex\scripts\data
ant -Dconfig.local=..\..\target\classes all > ..\..\target\build.out 2>&1
* Linux
cd ctakes-ytex/scripts/data
ant -Dconfig.local=../../target/classes all > ../../target/build.out 2>&1

== Testing ==

YTEX is dependent upon a database which is set up by the ant script scripts\data\build.xml

Note that all ytex-related tables in these databases will be dropped and recreated every time 
the maven build is run (don't put data you want to keep there).
  
Maven runs the ant script prior to running the tests. 
By default, we set up an hsqldb database for testing in the TEMP dir.
Override this by:
 * passing -Ddb.type=[mysql|mssql|orcl] to the maven command line.  If you do that,
 we will use the \src\test\resources\org\apache\ctakes\ytex\ytex.${db.type}.properties
 which point to the ytex_test schema (mysql/orcl) or catalog (mssql).
 * or dropping your own ytex.properties in 
 \src\test\resources\org\apache\ctakes\ytex.
 


############
Creating the ctakes-ytex-resources-3.1.2-SNAPSHOT.zip 
############
* Create the v_snomed_fword_lookup.txt file
Install umls in mysql, run ytex db setup - will create v_snomed_fword_lookup table.
Export the file:
  - set permissions: grant FILE on *.* to 'ytex'@'localhost'
  - export: mysqldump --user=ytex --password=ytex --tab=c:\temp ytex v_snomed_fword_lookup
  - replace \N with empty string in c:\temp\v_snomed_fword_lookup.txt
* Create the concept graph


